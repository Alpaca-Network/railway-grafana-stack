# Pyroscope configuration for GatewayZ monitoring stack
#
# Pyroscope is a continuous profiling backend. The gatewayz-backend FastAPI
# process pushes CPU/memory flamegraph samples here every 15 s via the
# pyroscope-io Python SDK. Grafana reads them back via the Pyroscope datasource.
#
# PORT:
#   Railway injects $PORT when a public domain is generated for this service.
#   The http_listen_port below uses that variable (defaults to 4040 for local).
#   Internal Railway DNS (pyroscope.railway.internal) always uses port 4040
#   regardless of the public-facing port.

server:
  http_listen_port: ${PORT:-4040}

# Store profiles on the local filesystem volume.
# Railway persists volumes across deploys, so profiles survive restarts.
storage:
  backend: filesystem
  filesystem:
    dir: /data/pyroscope

# Scrape configs are empty — GatewayZ uses the push model (SDK → Pyroscope),
# not the pull model (Pyroscope → target /debug/pprof).
scrape_configs: []
